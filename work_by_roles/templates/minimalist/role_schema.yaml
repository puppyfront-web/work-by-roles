schema_version: "1.0"
roles:
  # Built-in Clarifier Role (P1 optimization)
  - id: "clarifier"
    name: "Clarifier"
    description: "Clarifies ambiguous tasks and helps route them to the right role"
    domain: "general"
    responsibility: "Task clarification and routing"
    skills: []
    can_skills:
      - "requirements_analysis"
    decision_policy:
      on_ambiguous_task: "ask_clarification"
      on_out_of_scope: "ask_clarification"
    constraints:
      allowed_actions:
        - "ask_questions"
        - "clarify_requirements"
      forbidden_actions:
        - "execute_tasks"
  
  - id: "product_analyst"
    name: "Product Analyst"
    description: "Defines requirements and scope"
    extends: null
    constraints:
      allowed_actions:
        - "define_requirements"
        - "define_scope"
      forbidden_actions:
        - "write_code"
    required_skills:
      - skill_id: "requirements_analysis"
        min_level: 1
    validation_rules:
      - "must_produce_requirements_doc"

  - id: "developer"
    name: "Developer"
    description: "Unified role for architecture, implementation and testing"
    extends: null
    constraints:
      allowed_actions:
        - "design_architecture"
        - "write_code"
        - "write_tests"
      forbidden_actions:
        - "skip_requirements"
    required_skills:
      - skill_id: "system_design"
        min_level: 1
      - skill_id: "python_engineering"
        min_level: 1
    validation_rules:
      - "must_pass_tests"

